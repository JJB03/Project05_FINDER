<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{/layout/recruit_layout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>채용공고 조회</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>


<body layout:fragment="content">
    <div class="container-fluid container">
        <div style="display: flex; flex-direction: column; margin-left: 100px; margin-bottom: 50px;">
            <strong style="font-size: 45px; margin-bottom: 15px;">채용공고 관리</strong>
            <strong style="font-size: 19px;">혁신과 열정을 바탕으로, 미래를 창조하는 기업.</strong>
        </div>

        <div class="row justify-content-center" style="padding: 0 40px 0 40px;">

            <nav class="col-12 col-sm-12 col-lg-3 sidebar">
                <div style="margin: 15px 0 45px 15px;">
                    <strong style="font-size: 24px;">
                        마이페이지
                    </strong>
                </div>
                <ul class="nav flex-column ul-header">
                    <li class="li-header">
                        <strong class="fs-5">기업 정보</strong>
                    </li>
                    <li class="nav-item">
                        <a href="/company/introduce_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px;" class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/home.png" alt="x">
                                </div>
                                <div>
                                    기업 소개
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/company/info_update_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px;" class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/Registration.png" alt="x">
                                </div>
                                <div>
                                    기업 정보 수정
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/company/credit_list_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px;" class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/CreditCard.png" alt="x">
                                </div>
                                <div>
                                    결제 내역
                                </div>
                            </div>
                        </a>
                    </li>
                </ul>
                <ul class="nav flex-column ul-header">
                    <li class="li-header">
                        <strong class="fs-5">채용공고 관리</strong>
                    </li>
                    <li class="nav-item">
                        <a href="/recruit/post_jobs_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px; " class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/list.png" alt="x">
                                </div>
                                <div>
                                    채용공고 등록
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/recruit/posted_jobs_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px; " class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/list.png" alt="x">
                                </div>
                                <div>
                                    등록한 채용공고
                                </div>
                            </div>
                        </a>
                    </li>
                </ul>
                <ul class="nav flex-column ul-header">
                    <li class="li-header">
                        <strong class="fs-5">이력서 관리</strong>
                    </li>
                    <li class="nav-item">
                        <a href="/company/recruit_list_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px; " class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/Documents.png" alt="x">
                                </div>
                                <div>
                                    제출된 이력서
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/company/score_com" class="job-item-link nav-link fw-normal fs-6">
                            <div style="background-color: #fff; border-radius: 8px; " class="d-flex gap-2 p-2 ps-2">
                                <div>
                                    <img src="/img/Documents.png" alt="x">
                                </div>
                                <div>
                                    AI 간편 평가
                                </div>
                            </div>
                        </a>
                    </li>
                </ul>
            </nav>


            <main class="col-12 col-md-12 col-lg-8 main-content d-flex justify-content-end align-items-start">
                <form action="" method="post" class="job-listings ">
                    <div class="job-header">
                        <div style="padding: 15px;"><strong>채용공고 조회</strong></div>
                    </div>
                    <div class="post-main">
                        <div>제목</div>
                        <div>
                            <input type="text" name="" id="" placeholder="제목을 입력해주세요" class="input-none"
                                style="border: 1px solid var(--bs-border-color); padding: 1rem .75rem; border-radius: 8px;"
                                th:value="${recruitPost.recruitTitle}">
                        </div>
                        <div>keyword</div>
                        <div class="item d-flex justify-content-between">
                            
                            <div class="keyword-span" id="outputContainer">
                                <th:block th:each="keyword : ${recruitPost.keywordList}">
                                    <span th:text="${keyword.recruitKeyword}">

                                    </span>
                                </th:block>
                            </div>
            
                            <div class="gap-2 d-flex">
                                <div class="d-flex justify-content-center ">
                                    <input type="text" name="keyword" id="keyword" placeholder="keyword" class="p-1"
                                        style="border: 1px solid var(--bs-border-color); padding: 1rem .75rem; border-radius: 8px;">
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <span>담당업무</span>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control w-100" id="floatingInput"
                                        placeholder="Example" th:value="${recruitPost.recruitResponsibilities}">
                                    <label for="floatingInput">Ex : 개발자</label>
                                </div>
                            </div>
                            <div>
                                <span>자격조건</span>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control w-100" id="floatingInput"
                                        placeholder="Example" th:value="${recruitPost.recruitQualifications}">
                                    <label for="floatingInput" >Ex : 학사졸업</label>
                                </div>
                            </div>
                            <div>
                                <span>우대사항</span>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control w-100" id="floatingInput"
                                        placeholder="Example" th:value="${recruitPost.recruitPreferredQualifications}">
                                    <label for="floatingInput" >Ex : 자격증 우대</label>
                                </div>
                            </div>
                            <div>
                                <span>기간</span>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control w-100" id="floatingInput"
                                        placeholder="Example" th:value="${recruitPost.recruitRegDate}">
                                    <label for="floatingInput">채용공고 기간을 적어주세요.</label>
                                </div>
                            </div>
                        </div>

                        <div>
                            <span>내용</span>
                            <div class="form-floating" style="height: 500px;">
                                <textarea class="form-control w-100 h-100" placeholder="Leave a comment here"
                                    id="floatingTextarea2" th:text="${recruitPost.recruitContent}"></textarea>
                                <label for="floatingTextarea2">내용을 입력해주세요.</label>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">

                        <div class="file-input-wrapper">
                            <button class="btn-long" id="file-upload-button" style="display: inline-block;">파일
                                첨부</button>
                            <input type="file" class="file-input hidden-file-input" id="file-input" multiple>
                            <div id="file-names" class="mt-2"></div> <!-- 파일 이름들을 표시할 요소 추가 -->
                        </div>

                        <div>
                            <button class="btn-long" style="margin-left: 15px;">
                                수정
                            </button>
                            <button class="btn-long" style="margin-left: 15px;">
                                삭제
                            </button>
                        </div>
                    </div>

                </form>
            </main>
        </div>

    </div>



    <script>


        // document.getElementById('file-upload-button').addEventListener('click', function () {
        //     document.getElementById('file-input').click();
        // });

        // document.getElementById('file-input').addEventListener('change', function () {
        //     var fileNames = [];
        //     for (var i = 0; i < this.files.length; i++) {
        //         fileNames.push(this.files[i].name);
        //     }
        //     document.getElementById('file-names').textContent = fileNames.join(', ');
        // });

        $(document).ready(function () {
            $('#keyword').on('keypress', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); // Prevent the default form submission
                    var inputValue = $(this).val();
                    if (inputValue.trim() !== '') { // Check if the input is not empty
                        var newSpanElement = $('<input>', {
                            type: 'text',
                            class: 'input-keyword',
                            readonly: true,
                            style: '',
                            id: 'keywordForm',
                            name: 'keyword',
                            value: '#' + inputValue
                        });
                        $('#outputContainer').append(newSpanElement); // Append the new span to the container
                    }
                    $(this).val(''); // Clear the input field
                }
            });
        });

        $('#recruitForm').on('submit', function (event) {
            var allFieldsFilled = true;
            $('.keyword-main').each(function () {
                if ($(this).val().trim() === '') {
                    allFieldsFilled = false;
                    return false; // Exit the loop
                }
            });

            if (!allFieldsFilled) {
                event.preventDefault(); // Prevent form submission if any input is empty
                alert('내용를 입력해주세요.'); // Alert the user
            } else {
                if ($('.input-keyword').length !== 0) {
                    $('#keyword').remove(); // Remove the empty input field to avoid submission of empty fields
                }
            }
        });


        $('#file-upload-button').on('click', function (event) {
            event.preventDefault(); // Prevent the default form submission
            $('#file-input').click();
        });

        $('#file-input').on('change', function () {
            var fileNames = [];
            for (var i = 0; i < this.files.length; i++) {
                fileNames.push(this.files[i].name);
            }
            $('#file-names').text(fileNames.join(', '));
        });

    </script>


</body>



</html>